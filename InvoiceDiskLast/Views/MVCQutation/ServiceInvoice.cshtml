
@{
    ViewBag.Title = "ServiceInvoice";
}

<script src="~/Scripts/jquery-1.10.2.js"></script>
<script src="~/Scripts/jquery-1.10.2.min.js"></script>


<table class="table" id="quatationServiceList">
    <thead style="background-color:black;color:white">
        <tr>
            <th>
                ID
            </th>
            <th>
                Factuur nummer
            </th>
            <th>
                Referntie nummer
            </th>
            <th>
                Vaevalidatum
            </th>
            <th>
                Type
            </th>
            <th>
                staat
            </th>
            <th>
                Actie
            </th>
        </tr>
    </thead>
    <tbody></tbody>
</table>



<script type="text/javascript">
    $(document).ready(function () {

        $("#quatationServiceList").DataTable({

            "processing": true,

            "searching": true,
            "serverSide": true,
            "filter": false,
            "orderMulti": false,
            "ajax": {
                "url": "/MVCQutation/GetQuataionServiceList",
                "type": "POST",
                "datatype": "json"
            },
            "columns": [
                    { "data": "QutationID", "name": "QutationID", "autoWidth": true },// key for edit delete
                    { "data": "Qutation_ID", "name": "Qutation_ID", "autoWidth": true },
                    { "data": "RefNumber", "name": "RefNumber", "autoWidth": true },


                   {
                       "data": "QutationDate", "type": "date ",
                       "render": function (value) {
                           if (value === null) return "";
                           var pattern = /Date\(([^)]+)\)/;//date format from server side
                           var results = pattern.exec(value);
                           var dt = new Date(parseFloat(results[1]));

                           return (dt.getMonth() + 1) + "/" + dt.getDate() + "/" + dt.getFullYear();
                       }, "autoWidth": true
                   },
                     { "data": "Type", "name": "Type", "autoWidth": true },
                     {
                         //"data": "Status", "name": "Status", "autoWidth": true
                         render: function (data, type, row) {

                             switch (row.Status) {

                                 case "open":
                                     return "<td><span class='label label-primary'>" + row.Status + "</span></td>"
                                     break;

                                 case "pending":
                                     return "<td><span class='label label-info'>" + row.Status + "</span></td>"
                                     break;


                                 case "rejected":

                                     return "<td><span class='label label-danger'>" + row.Status + "</span></td>"
                                     break;

                                 case "accepted":
                                     return "<td><span class='label label-success>" + row.Status + "</span></td>"
                                     break;
                             }

                         }
                     },
                      {
                          render: function (data, type, row) {
                              switch (row.Type) {

                                  case "Services":
                                      return '</button><a href="#" class="btn btn-success btn-sm" onclick="ViewQutationDetail(' + row.QutationID + ')"><i class="fa fa-eye">View and Print Invoice</i></a>'
                                      break
                              }
                          }
                      }
            ]
        });


    });









    //function EditQutation(QutationId) {

    //    $.ajax({
    //        url: '/MVCClient/AddOrEditQutation',
    //        type: 'GET',
    //        data: {
    //            Qutationid: QutationId
    //        },
    //        success: function (data) {
    //            window.location.href = "/MVCQutation/AddOrEdit/" + QutationId;
    //        }
    //    });
    //}



    function ViewQutationDetail(QutationId) {

        $.ajax({
            url: '/MVCClient/AddOrEditQutation',
            type: 'GET',
            data: {
                Qutationid: QutationId
            },
            success: function (data) {
                window.location.href = "/MVCQutation/ServiceViewPrint?Id=" + QutationId;

            }
        });
    }











    //function EditService(QutationId) {

    //    $.ajax({
    //        url: '/MVCClient/AddOrEditQutation',
    //        type: 'GET',
    //        data: {
    //            Qutationid: QutationId
    //        },
    //        success: function (data) {
    //            window.location.href = "/QutationService/AddOrEdit/" + QutationId;
    //        }
    //    });
    //}



    //function ViewServiceDetail(QutationId) {

    //    $.ajax({
    //        url: '/MVCClient/AddOrEditQutation',
    //        type: 'GET',
    //        data: {
    //            Qutationid: QutationId
    //        },
    //        success: function (data) {
    //            window.location.href = "/QutationService/ViewServiceQutation?quautionId=" + QutationId;

    //        }
    //    });
    //}




</script>
