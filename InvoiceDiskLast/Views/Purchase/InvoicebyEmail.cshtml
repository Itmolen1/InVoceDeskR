@model InvoiceDiskLast.Models.EmailModel

@{
    ViewBag.Title = "InvoicebyEmail";
}
<script src="~/Scripts/jquery-1.10.2.js"></script>
<script src="~/Scripts/jquery-1.10.2.min.js"></script>
<div class="container">


    @if (TempData["Error"] != null)
    {
        <div>
            <p>@TempData["Error"]</p>
        </div>
    }


    <div class="row">
        <div class="col-sm-1"></div>
        <div class="col-sm-10">
            @using (Html.BeginForm("InvoiceByEmail", "purchase", FormMethod.Post, new { id = "frmSendEmail" }))
            {
                <div class="row">
                    @*<h2 id="">Invoice-@Model.invoiceId</h2>*@
                    @Html.HiddenFor(Model => Model.invoiceId)
                    <div class="col-sm-12">
                        <div class="bg-light border-left">
                            <div class="card-body">
                                <h3 class="card-title">Compose New Message<div class="pull-right" style="color:skyblue"> Invoice-@Model.invoiceId</div></h3>
                                <div class="form-group">
                                    @Html.TextBoxFor(Model => Model.From, new { @class = "form-control", @readonly = "readonly", @title = "From" })
                                </div>
                                <div class="form-group">
                                    @Html.TextBoxFor(Model => Model.ToEmail, new { @class = "form-control", @required = "required", @placeholder = "To" })
                                </div>
                                <div class="form-group">
                                    @Html.TextBoxFor(Model => Model.Topic, new { @class = "form-control", @placeholder = "Topic" })
                                </div>
                                <div class="form-group">
                                    @Html.TextAreaFor(Model => Model.EmailText, new { @class = "form-control textarea_editor", @rows = "15", @cols = "50", placeholder = "Enter text ..." })

                                </div>


                                <h4><i class="ti-link"></i><label>@Model.Attachment</label>add</h4>


                                <div class="btn btn-default image-preview-input">
                                  
                                    <span class="image-preview-input-title">Choose File</span>
                                    <input type="file" accept="image/png, image/jpeg, image/gif" name="input-file-preview" id="CFileUpload1" /> <!-- rename it -->
                                </div>
                                <table class="table table-hover" id="participantTable">

                                    <tbody id="upload">

                                    </tbody>


                                </table>


                                @Html.HiddenFor(Model => Model.Attachment)


                                <hr />
                                <button type="submit" class="btn btn-success"><i class="fa fa-envelope-o" style="margin-right:5px"></i>Send</button>
                                <a href="/Purchase/AddOrEdit/@Model.invoiceId" class="btn btn-dark"><i class="fa fa-times" style="margin-right:5px"></i>Discard</a>
                            </div>
                        </div>
                    </div>

                </div>
            }
        </div>
        <div class="col-sm-1"></div>
    </div>
</div>


<script type="text/javascript">
    $('#btnadd').click(function () {
        $('#Idd').append("<input type='file' calss='form-control'></input>");
    });



    $(document).ready(function () {

        //$("#CFileUpload1").change(function () {


        //    $('#upload').append("<tr><td><input  type='text' placeholder='Name'></td><td><button class='btn btn-danger remove' type='button'>Remove</button></td></tr>")
        //});

        $("#CFileUpload1").change(function () {
            var Data = $('#CFileUpload1').val();
            $('#upload').append("<tr><td><input type='text' claass='form-control' value='" + Data + "' name='FileName'></td><td><button class='btn btn-danger remove' type='button'>Remove</button></td></tr>")
        });


        $(document).on('click', '.remove', function () {
            $(this).parent().parent().remove();
        });

       

        //function readURL(input) {
        //    debugger;
        //    if (input.files && input.files[0]) {
        //        var reader = new FileReader();

        //        reader.onload = function (e) {
        //            $('#blah').attr('src', e.target.result);

        //        }

        //        reader.readAsDataURL(input.files[0]);



        //    }
        //}

    });
</script>


